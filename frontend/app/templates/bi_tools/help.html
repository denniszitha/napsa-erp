{% extends "layouts/base.html" %}

{% block title %}Help - BI Tools{% endblock %}

{% block content %}
<div class="container-fluid px-4">
    <div class="page-header mb-4">
        <h1 class="h3">BI Tools Help & Documentation</h1>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{{ url_for('dashboard.index') }}">Dashboard</a></li>
                <li class="breadcrumb-item"><a href="{{ url_for('bi_tools.index') }}">BI Tools</a></li>
                <li class="breadcrumb-item active">Help</li>
            </ol>
        </nav>
    </div>

    <div class="row">
        <div class="col-md-3">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Quick Links</h5>
                    <div class="list-group list-group-flush">
                        <a href="#getting-started" class="list-group-item list-group-item-action">Getting Started</a>
                        <a href="#analytics" class="list-group-item list-group-item-action">Analytics Guide</a>
                        <a href="#reports" class="list-group-item list-group-item-action">Report Generation</a>
                        <a href="#query-builder" class="list-group-item list-group-item-action">Query Builder</a>
                        <a href="#dashboards" class="list-group-item list-group-item-action">Custom Dashboards</a>
                        <a href="#data-explorer" class="list-group-item list-group-item-action">Data Explorer</a>
                        <a href="#faq" class="list-group-item list-group-item-action">FAQ</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-9">
            <div class="card mb-4">
                <div class="card-body">
                    <h2 id="getting-started" class="h4 mb-3">Getting Started</h2>
                    <p>The Business Intelligence Tools module provides advanced analytics, reporting, and data visualization capabilities for the NAPSA ERM system.</p>
                    
                    <h5>Key Features:</h5>
                    <ul>
                        <li>Real-time analytics and trend analysis</li>
                        <li>Customizable dashboards and visualizations</li>
                        <li>Automated report generation</li>
                        <li>Advanced query builder for custom data extraction</li>
                        <li>Interactive data exploration tools</li>
                    </ul>

                    <hr class="my-4">

                    <h2 id="analytics" class="h4 mb-3">Analytics Guide</h2>
                    <p>The Analytics section provides comprehensive trend analysis and insights:</p>
                    <ol>
                        <li>Select the metric you want to analyze (Risks, Controls, Incidents, etc.)</li>
                        <li>Choose the time period and granularity</li>
                        <li>Apply filters to focus on specific departments or categories</li>
                        <li>View interactive charts and statistical summaries</li>
                    </ol>

                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i> <strong>Tip:</strong> Use the export function to download analytics data for further analysis in Excel or other tools.
                    </div>

                    <hr class="my-4">

                    <h2 id="reports" class="h4 mb-3">Report Generation</h2>
                    <p>Generate professional reports with just a few clicks:</p>
                    <ul>
                        <li><strong>Pre-built Reports:</strong> Choose from templates like Risk Assessment, Compliance Status, and KRI Performance</li>
                        <li><strong>Custom Reports:</strong> Create tailored reports with specific data and filters</li>
                        <li><strong>Scheduled Reports:</strong> Set up automatic report generation and distribution</li>
                        <li><strong>Export Formats:</strong> PDF, Excel, Word, and PowerPoint</li>
                    </ul>

                    <hr class="my-4">

                    <h2 id="query-builder" class="h4 mb-3">Query Builder</h2>
                    <p>The Query Builder allows advanced users to write custom SQL queries:</p>
                    <div class="bg-light p-3 rounded">
                        <code>
                            SELECT * FROM risks WHERE status = 'High' AND department_id = 1 ORDER BY created_at DESC LIMIT 10;
                        </code>
                    </div>
                    <p class="mt-3">Features include syntax highlighting, auto-completion, and query history.</p>

                    <hr class="my-4">

                    <h2 id="dashboards" class="h4 mb-3">Custom Dashboards</h2>
                    <p>Create personalized dashboards with drag-and-drop widgets:</p>
                    <ol>
                        <li>Click "Create Dashboard" to start</li>
                        <li>Choose a layout template</li>
                        <li>Add widgets from the widget library</li>
                        <li>Configure each widget with your preferred data source and visualization</li>
                        <li>Save and share with your team</li>
                    </ol>

                    <hr class="my-4">

                    <h2 id="data-explorer" class="h4 mb-3">Data Explorer</h2>
                    <p>Interactively explore and analyze your data:</p>
                    <ul>
                        <li>Browse different data sources</li>
                        <li>Apply multiple filters and search criteria</li>
                        <li>Sort and group data dynamically</li>
                        <li>Create pivot tables and cross-tabs</li>
                        <li>Export filtered results</li>
                    </ul>

                    <hr class="my-4">

                    <h2 id="faq" class="h4 mb-3">Frequently Asked Questions</h2>
                    
                    <div class="accordion" id="faqAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                    How often is the data updated?
                                </button>
                            </h2>
                            <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Most data is updated in real-time. Some aggregated metrics are calculated every 15 minutes. You can see the last update time on each dashboard widget.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                    Can I schedule automated reports?
                                </button>
                            </h2>
                            <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Yes, you can schedule reports to be generated daily, weekly, or monthly. Go to Reports > Scheduled Reports to set up automation.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                    How do I share dashboards with my team?
                                </button>
                            </h2>
                            <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Click the share button on any dashboard to generate a shareable link or grant specific users access. You can set view-only or edit permissions.
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-4 p-3 bg-light rounded">
                        <h5>Need More Help?</h5>
                        <p>Contact the IT Support team at <a href="mailto:support@napsa.co.zm">support@napsa.co.zm</a> or call ext. 1234</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}