{% extends "layouts/base.html" %}
{% block title %}System Settings - NAPSA ERM{% endblock %}

{% block content %}
<div class="content-wrapper">
<div class="container-fluid">
    <!-- Page Header -->
    <div class="page-header d-flex justify-content-between align-items-center">
        <h1 class="page-title">
            <i class="fas fa-cog"></i> System Settings
        </h1>
        <div class="page-actions">
            <button class="btn btn-primary" onclick="saveSettings()">
                <i class="fas fa-save"></i> Save Changes
            </button>
            <button class="btn btn-outline-secondary" onclick="resetSettings()">
                <i class="fas fa-undo"></i> Reset
            </button>
        </div>
    </div>

    <!-- Settings Tabs -->
    <div class="row">
        <div class="col-md-3">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title">Settings Menu</h5>
                </div>
                <div class="list-group list-group-flush">
                    <a href="#general" class="list-group-item list-group-item-action active" data-bs-toggle="tab">
                        <i class="fas fa-cogs"></i> General
                    </a>
                    <a href="#security" class="list-group-item list-group-item-action" data-bs-toggle="tab">
                        <i class="fas fa-shield-alt"></i> Security
                    </a>
                    <a href="#notifications" class="list-group-item list-group-item-action" data-bs-toggle="tab">
                        <i class="fas fa-bell"></i> Notifications
                    </a>
                    <a href="#integrations" class="list-group-item list-group-item-action" data-bs-toggle="tab">
                        <i class="fas fa-plug"></i> Integrations
                    </a>
                    <a href="#backup" class="list-group-item list-group-item-action" data-bs-toggle="tab">
                        <i class="fas fa-database"></i> Backup & Recovery
                    </a>
                    <a href="#users" class="list-group-item list-group-item-action" data-bs-toggle="tab">
                        <i class="fas fa-users"></i> User Management
                    </a>
                </div>
            </div>
        </div>
        <div class="col-md-9">
            <div class="tab-content">
                <!-- General Settings -->
                <div class="tab-pane active" id="general">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title">General Settings</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Organization Name</label>
                                    <input type="text" class="form-control" value="National Pension Scheme Authority">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">System Name</label>
                                    <input type="text" class="form-control" value="NAPSA ERM System">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Time Zone</label>
                                    <select class="form-select">
                                        <option selected>Africa/Lusaka (CAT)</option>
                                        <option>UTC</option>
                                        <option>Africa/Johannesburg</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Date Format</label>
                                    <select class="form-select">
                                        <option>DD/MM/YYYY</option>
                                        <option selected>YYYY-MM-DD</option>
                                        <option>MM/DD/YYYY</option>
                                    </select>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">System Logo</label>
                                <input type="file" class="form-control" accept=".jpg,.jpeg,.png">
                                <div class="form-text">Upload a logo file (JPG, PNG, max 2MB)</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Security Settings -->
                <div class="tab-pane" id="security">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title">Security Settings</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Session Timeout (minutes)</label>
                                    <input type="number" class="form-control" value="30" min="5" max="480">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Password Expiry (days)</label>
                                    <input type="number" class="form-control" value="90" min="30" max="365">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Minimum Password Length</label>
                                    <input type="number" class="form-control" value="8" min="6" max="32">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Login Attempts Before Lockout</label>
                                    <input type="number" class="form-control" value="5" min="3" max="10">
                                </div>
                            </div>
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="requireMFA" checked>
                                <label class="form-check-label" for="requireMFA">
                                    Require Multi-Factor Authentication
                                </label>
                            </div>
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="auditLogging" checked>
                                <label class="form-check-label" for="auditLogging">
                                    Enable Audit Logging
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Notifications -->
                <div class="tab-pane" id="notifications">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title">Notification Settings</h5>
                        </div>
                        <div class="card-body">
                            <h6>Email Notifications</h6>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="emailIncidents" checked>
                                <label class="form-check-label" for="emailIncidents">
                                    New Incidents
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="emailRisks" checked>
                                <label class="form-check-label" for="emailRisks">
                                    High Risk Alerts
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="emailCompliance">
                                <label class="form-check-label" for="emailCompliance">
                                    Compliance Deadlines
                                </label>
                            </div>
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="checkbox" id="emailKRI" checked>
                                <label class="form-check-label" for="emailKRI">
                                    KRI Threshold Breaches
                                </label>
                            </div>
                            
                            <h6>System Notifications</h6>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">SMTP Server</label>
                                    <input type="text" class="form-control" value="smtp.napsa.co.zm">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">SMTP Port</label>
                                    <input type="number" class="form-control" value="587">
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">From Email Address</label>
                                <input type="email" class="form-control" value="erm-system@napsa.co.zm">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Integrations -->
                <div class="tab-pane" id="integrations">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title">System Integrations</h5>
                        </div>
                        <div class="card-body">
                            <div class="integration-item">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <h6>Oracle ERP Integration</h6>
                                        <small class="text-muted">Connect to Oracle Financial system for employee and financial data</small>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="oracleIntegration" checked>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-2">
                                        <label class="form-label small">Connection String</label>
                                        <input type="text" class="form-control form-control-sm" value="oracle://prod.napsa.local:1521/NAPSA">
                                    </div>
                                    <div class="col-md-6 mb-2">
                                        <label class="form-label small">Sync Frequency</label>
                                        <select class="form-select form-select-sm">
                                            <option selected>Daily</option>
                                            <option>Weekly</option>
                                            <option>Monthly</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class="integration-item">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <h6>Active Directory Integration</h6>
                                        <small class="text-muted">Sync user accounts and authentication with AD</small>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="adIntegration">
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class="integration-item">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <h6>BOZ Regulatory Reporting</h6>
                                        <small class="text-muted">Automated submission of regulatory returns</small>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="bozIntegration">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Backup -->
                <div class="tab-pane" id="backup">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title">Backup & Recovery</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Backup Frequency</label>
                                    <select class="form-select">
                                        <option selected>Daily</option>
                                        <option>Weekly</option>
                                        <option>Monthly</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Backup Time</label>
                                    <input type="time" class="form-control" value="02:00">
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Backup Location</label>
                                <input type="text" class="form-control" value="/backup/napsa-erm/">
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Retention Period (days)</label>
                                    <input type="number" class="form-control" value="30" min="7" max="365">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label">Last Backup</label>
                                    <input type="text" class="form-control" value="2025-08-11 02:00:00" readonly>
                                </div>
                            </div>
                            <div class="d-flex gap-2">
                                <button class="btn btn-outline-primary">
                                    <i class="fas fa-play"></i> Run Backup Now
                                </button>
                                <button class="btn btn-outline-secondary">
                                    <i class="fas fa-download"></i> Download Backup
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- User Management -->
                <div class="tab-pane" id="users">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title">User Management</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="card bg-light">
                                        <div class="card-body text-center">
                                            <h4>24</h4>
                                            <small>Total Users</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card bg-light">
                                        <div class="card-body text-center">
                                            <h4>18</h4>
                                            <small>Active Users</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card bg-light">
                                        <div class="card-body text-center">
                                            <h4>5</h4>
                                            <small>Administrators</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-3">
                                <button class="btn btn-primary">
                                    <i class="fas fa-user-plus"></i> Add New User
                                </button>
                                <button class="btn btn-outline-secondary">
                                    <i class="fas fa-users"></i> Manage Roles
                                </button>
                                <button class="btn btn-outline-info">
                                    <i class="fas fa-key"></i> Password Policies
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

<script>
function saveSettings() {
    alert('Save settings functionality will be implemented');
}

function resetSettings() {
    if (confirm('Are you sure you want to reset all settings to defaults?')) {
        location.reload();
    }
}
</script>
{% endblock %}